<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.soft.mydemo.mapper.FilesInfoMapper" >

	<!-- 文件查询 -->
	<select id="queryFilesInfo"
			parameterType="com.soft.mydemo.bean.filesInfo.FilesInfoBean"
			resultType="com.soft.mydemo.bean.filesInfo.FilesInfoBean" >
		select
			t.fileId,
			t.fileName,
			t.fileType,
			t.fileSize,
		    t.filePtah,
			t.uploadTime,
			t.editTime,
			t.attrUser,
			t.categoryId,
			t.downloadTimes,
			t.state,
			t.remark
		from filesInfo t
		<where>
			<if test="fileId != null and fileId != ''">
				and t.fileId = #{fileId}
			</if>
			<if test="fileName != null and fileName != ''">
				and t.fileName = #{fileName}
			</if>
			<if test="fileType != null and fileType != ''">
				and t.fileType = #{fileType}
			</if>
			<if test="uploadTimeStart != null and uploadTimeStart != ''">
				and to_char(t.uploadTime,'yyyy-MM-dd') <![CDATA[ >= ]]> #{uploadTimeStart}
			</if>
			<if test="uploadTimeEnd != null and uploadTimeEnd != ''">
				and to_char(t.uploadTime,'yyyy-MM-dd') <![CDATA[ <= ]]> #{uploadTimeEnd}
			</if>
			<if test="editTimeStart != null and editTimeStart != ''">
				and to_char(t.editTime,'yyyy-MM-dd') <![CDATA[ >= ]]> #{editTimeStart}
			</if>
			<if test="editTimeEnd != null and editTimeEnd != ''">
				and to_char(t.editTime,'yyyy-MM-dd') <![CDATA[ <= ]]> #{editTimeEnd}
			</if>
			<if test="attrUser != null and attrUser != ''">
				and t.attrUser = #{attrUser}
			</if>
			<if test="categoryId != null and categoryId != ''">
				and t.categoryId = #{categoryId}
			</if>
			<if test="state != null and state != ''">
				and t.state = #{state}
			</if>
		</where>
		order by t.attrUser, t.uploadTime, t.editTime desc
	</select>

	<select id="queryFilesInfoForOne"
			parameterType="java.lang.String"
			resultType="com.soft.mydemo.bean.filesInfo.FilesInfoBean" >
		select
			t.fileId,
			t.fileName,
			t.fileType,
			t.fileSize,
			t.filePtah,
			t.uploadTime,
			t.editTime,
			t.attrUser,
			t.categoryId,
			t.downloadTimes,
			t.state,
			t.remark
		from filesInfo t
		where t.fileId = #{fileId}
	</select>
</mapper>